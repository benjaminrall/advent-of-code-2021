print([sum([ sum([col[0] if not col[1] else 0 for col in row]) for row in [b for b in winningBoards[0] if True in [all(e[i][1] is True for i in range(5)) for e in [row for row in b]] or True in [all(e[i][1] is True for i in range(5)) for e in [col for col in zip(*b)]]][0] ]) * winningBoards[1] for i in range(1) if (winningBoards := [[[boards := boards if True in [True in [all(e[i][1] is True for i in range(5)) for e in [row for row in L]] or True in [all(e[i][1] is True for i in range(5)) for e in [col for col in zip(*L)]] for L in boards[0]] else [[[[ board[i][j] if board[i][j][0] != number else [number, True] for i in range(5)] for j in range(5)] for board in boards[0]], number]] for number in [int(num) for num in [line.replace("\n", " ").strip() for line in open("input.txt", "r").readlines()][0].split(",")]][-1][0] for i in range(1) if (boards := [[[[[int(x), False] for x in e.strip().split(" ") if x != ""] for e in n.split("|")] for n in '|'.join([line.replace("\n", " ").strip() for line in open("input.txt", "r").readlines()][2:]).split("||")], 0]) is not None][0]) is not None][0])